<!DOCTYPE html>
<html lang="en">

<head>
    <title>Migration to Australia</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css" />

    <link rel="stylesheet" href="layout.css">
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.15.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
</head>
<style>
    .pure-u-1 {
      max-width: auto;
      margin: auto;
      text-align: center;
      font-family: sans-serif;
    };
    .pure-u-3-5 {
      max-width: fit-content;
      margin: auto;
      text-align: center;
      font-family: sans-serif;
    };
    .pure-u-3 {
      max-width: 500px;
      margin: auto;
      text-align: center;
      font-family: sans-serif;
    };
    .pure-u-7 {
      max-width: 500px;
      margin: auto;
      text-align: right;
      font-family: sans-serif;
    }
    .pure-u-5-10 {
        max-width: 500px;
        margin: auto;
    }
    
    .pure-u-3-7{
        max-width: 1000px;
        margin: auto;
        text-align: center;
        font-size: larger;
        font-family: sans-serif;
    }
    .pure-4-6 {
        max-width: fit-content;
        margin:auto;
    }
    .pure-u-2-6 {
        text-align: center;
        font-size: larger;
        font-family: sans-serif;
    }
    .p4 {
        font-size: xx-large;
    }
</style>
<body style="background-color: #c8eaff;">
    
    <div class="pure-u-1">
        <h1>Migration to Australia</h1>
    </div>
    <!--le map-->

    <div class="pure-g">
        <div class="pure-u-1-5" style="width: 300px;"></div>
        <div id = "vis1" class="pure-u-3-5" style="background-color:#c8eaff;"></div>
        <div class="pure-u-1-5"></div>

    </div>
    <div></div>
    <!-- text 1-->
    
    <div class="pure-g">
        <div class="pure-u-2-7"></div>
        <div class="pure-u-3-7">
            <p1 style="text-align: center;font-size: larger; font-family: sans-serif;" > 
                Australia is a very diverse country, boasting a large migrant population. 
                The map above illustrates the number of migrants and the various countries they come from. 
                The year selection slider can be used to compare the changes in number of migrants from different countries.
                <p style=" font-family: sans-serif;">
                    Denoted by the darker black colours on the map, in 2008, the countries leading in the number of migrants are China, India, United Kingdom and perhaps less visibly, New Zealand.    
                </p>
            </p1>
        </div>
        <div class="pure-u-2-7"></div>
    </div>

    <div>
        <h2 style="text-align: center; font-family: sans-serif;">
            Proportion of Migrants in Australia     
        </h2>
    </div>
    
    <!--le stacked area -->
    <div class="pure-g">
        <div class="pure-u-1-6" style="width: 300px;"></div>
        <div class="pure-u-2-6">
            <div id="vis4"></div> 
        </div>
        <div class="pure-u-2-6" style="width: 400px;">
            <p style="font-size: larger; font-family: sans-serif;">
                The Global Financial Crysis was one of the major events that transpired during the year 2008. 
                Many countries were affected by the 2008 GFC. Australia, China, India, Japan, Brasil were amongnst the least 
                affected countries, while the United States, Ukraine, Russia, Mexico were some of the countries most impacted by the GFC [1].
                Looking at the Migration rates, The GFC has had little impact to Australia, in fact, the number of migrants were higher than ever before, mostly coming from the countries least affected by the GFC
            </p>
        </div>
        <div class="pure-u-1-6"></div>
    </div>
    <!--uhh bubble plot maybe but look into making it split-->
    
<div class="pure-g">
    <div class="pure-u-1-8"  style="width: 100px;"></div>
    <div class="pure-u-4-8" style="width: 800px;" >
        <div>
            <h2 style="font-family: sans-serif;">Migration Rates</h2>
        </div>
        <div id="vis3" class="pure-u-10" style="width: fit-content;"></div>
        <div style="width: 800px;">
            <p></p>
            
            <p3 style="font-size: larger; font-family: sans-serif;">
                This line chart shows us the number of migrants by 
                country throughout the years and the bars show the 
                total migrant population in Australia.  
                Observing the chart, it is very apparent that the United Kingdom has consistently been the highest migrating country
            </p3>
            
        </div> 
    </div>
    <div class="pure-u-1-8" style="width: 80px;"></div>
    <div class="pure-u-4-8" style="width: 800px;">
        <div>
            <h2 style= "font-family: sans-serif;">1980 VS 2008</h2>
        </div>
        <div id="vis2" class="pure-u-10" style="width: fit-content;"></div>
        <div style="width: 800px;">
            <p4 style="font-size: larger; font-family: sans-serif;">
                This bubble plot visualises the number of migrants in the years 1980 and 2008 and shows the population of countries denoted by the size of the bubble. 
                The pattern observed here suggests that the migrants from asian countries are relatively new to Australia, while European countries have high migration numbers both during 1980 and 2008. 
                It can be observed that African countries have had low migration rates to Australia during 1980, with a healthy increase by 2008. 
            </p4>
            
        </div> 
    </div>
    
</div> 
<div>
    <p style="font-size: small;">
        references: 
        [1]: https://carnegieendowment.org/publications/index.cfm?fa=view&id=23284&prog=zgp&proj=zie
        </p>
</div>   


<!--MAP-->
<script type="text/javascript"> //LOOK AT WEEK 7 INTRO TO JS     
            var vlSpec = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    
            
            "width": 1200,
            "height": 600,  
            
            "title": "Migration to Australia throughout the years",
            "projection": {"type": "equalEarth"},
            "params": [
                {
                    "name": "year_selection",
                    "value":2008,
                    "bind":{
                        "input": "range",
                        "min": 1980,
                        "max": 2008,
                        "step": 1,
                        "name": "Select a Year: "
                    }
                }
            ],
            "layer": [
                {
                  "data": {
                    "sphere": true
                  },
                  "mark": {
                    "type": "geoshape",
                    "fill": "aliceblue"
                  }
                },
                {
                  "data": {
                    "graticule": true
                  },
                  "mark": {
                    "type": "geoshape",
                    "stroke": "lightgrey",
                    "strokeWidth": 0.5
                  }
                },
        {
            
            "data":{ 
                            "url": "https://raw.githubusercontent.com/asax0007/FIT3179_DV2/main/sorted%20aus%20data.csv"
                        },
            
            "transform": [
                {
                    "lookup": "CODE",
                    "from":{
                        "data": {
                "url": "https://raw.githubusercontent.com/asax0007/FIT3179_HW9/main/ne_50m_admin_0_countries.json",
                "format": {"type": "topojson", "feature":"ne_50m_admin_0_countries"}
            }, 
                    "key":"properties.ADM0_A3"
                    }, 
                    "as":"geo"
                },
                {"filter":"datum.year == year_selection"}
            ],

            "mark":{"type": "geoshape", "stroke":"darkgrey"},
            "encoding": {
                "shape": {"field": "geo", "type": "geojson"},
                "color":{
                    "scale": {"type":"log","domain":[1,60000],"scheme": "magma", "reverse": true},
                    "field":"number", 
                    "type":"quantitative",
                    "title":"No. of Migrants"
                },
            "tooltip": [
                {"field": "OdName", "type": "nominal", "title":"Country"},
                {"field":"number", "type": "quantitative", "title":"Number of migrations "},
                {"field":"year", "type": "ordinal", "title":"Year"}

            ]}
       }
]
}
    ;
  // optional argument passed to Vega-Embed to specify Vega-Lite spec. More info at https://github.com/vega/vega-embed
  var opt = {
    "mode": "vega-lite"
  };

  // Embed the visualization in the container with id `vis`
  vegaEmbed("#vis1", vlSpec, opt).then(function(result) {
    // Callback receiving the View instance and parsed Vega spec
    // result.view is the View, which resides under the '#vis' element
  }).catch(console.warn);
        
        


         
</script>
<!--stacked area-->
<script type="text/javascript"> 
    var v4Spec = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {"url": "https://raw.githubusercontent.com/asax0007/FIT3179_HW10/main/sorted%20aus%20data.csv"},
    "width": 700, "height": 500,
    "title": "Migrant population distribution in Australia",
    "params": [
        {
        "name": "Continent_selection",
        "bind": {
        "input": "select",
        "options": [
        null,
        "Northern America",
        "Latin America and the Caribbean",
        "Europe",
        "Africa",
        "Asia",
        "Oceania"            
        ],
        "labels":[
            "Show All",
            "Northern America",
            "Latin America and the Caribbean",
            "Europe",
            "Africa",
            "Asia",
            "Oceania"
            ],
        "name": "Continent Selection: "
        }
    },
    {
        "name": "Population_selection",
        "value":50000000,
         "bind":{
            "input": "range",
            "min": 100000,
            "max": 300000000,
            "step": 100000,
            "name": "population greater than: "
        }
    }
    ],
    "transform": [
        {
            "lookup": "CODE",
            "from":{
                "data":{ 
                    "url": "https://raw.githubusercontent.com/asax0007/FIT3179_DV2/main/FIT3179_population_data_cleaned.csv"
                },
            "key":"code",
            "fields":["mig1980","mig2008"]
            }
        },
       {"filter":"datum.mig2008 > Population_selection"},
       {"filter": "Continent_selection == null || datum.AreaName == Continent_selection"}
    ],
    "mark": "area",
    "encoding": {
      "x": {
        "field": "year"
      },
      "y": {
        "aggregate": "sum", "field": "number",
        "axis": null,
        "stack": "normalize"
      },
      "color": {"field":"OdName", "scale":{"scheme": "category20c"}, "title":"Country"},
      "tooltip": [
        {"field": "OdName", "type": "nominal", "title":"Country"},
        {"field":"number", "type": "quantitative", "title":"no. migrated: "},
        {"field":"year", "type": "nominal", "title":"year"}
    ]
    }
  };
    // optional argument passed to Vega-Embed to specify Vega-Lite spec. More info at https://github.com/vega/vega-embed
var opt = {
"mode": "vega-lite"
};

// Embed the visualization in the container with id `vis`
vegaEmbed("#vis4", v4Spec, opt)
    </script>

<!--lINE-->
<script type="text/javascript"> //LOOK AT WEEK 7 INTRO TO JS     
    var v3Spec = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "width": 500,
            "height": 450,
            "params": [
                {
                "name": "Continent_selection",
                "bind": {
                "input": "select",
                "options": [
                null,
                "Northern America",
                "Latin America and the Caribbean",
                "Europe",
                "Africa",
                "Asia",
                "Oceania"            
                ],
                "labels":[
                    "Show All",
                    "Northern America",
                    "Latin America and the Caribbean",
                    "Europe",
                    "Africa",
                    "Asia",
                    "Oceania"
                    ],
                "name": "Continent Selection: "
                }
            },
    {
        "name": "Population_selection",
        "value":30000000,
         "bind":{
            "input": "range",
            "min": 100000,
            "max": 300000000,
            "step": 100000,
            "name": "population greater than: "
        }
    }
            ],
            "title": "Number of migrations to Australia",
    "layer":[
      {
            "data":{ 
                "url": "https://raw.githubusercontent.com/asax0007/FIT3179_DV2/main/Sum_migrants.csv"
            },
            "mark": "bar",
            "encoding": {
              "x": {
                "field": "Year",
                "type": "nominal"
              },
              "y": {
                "field": "Sum",
                "type": "quantitative",
                "title":"Total Migrants in Australia"
              },
              "color": {"value": "grey"},
              "opacity": {"value": 0.7}
            }
        },
        {
            "data":{ 
                "url": "https://raw.githubusercontent.com/asax0007/FIT3179_HW10/main/sorted%20aus%20data.csv"
            },
            
            
            
            "transform": [
                {
                    "lookup": "CODE",
                    "from":{
                        "data":{ 
                            "url": "https://raw.githubusercontent.com/asax0007/FIT3179_DV2/main/FIT3179_population_data_cleaned.csv"
                        },
                    "key":"code",
                    "fields":["mig1980","mig2008"]
                    }
                },
                {"calculate": "datum.number/datum.mig1980", "as": "norm_1980"},
                {"calculate": "datum.number/datum.mig2008", "as": "norm_2008"},
               {"filter":"datum.mig2008 > Population_selection"},
               {"filter": "Continent_selection == null || datum.AreaName == Continent_selection"}
            ],
            "mark": {
                "type": "line",
                "point":true
                },
            "encoding": {
                "y": {
                    "field": "number",
                    "type": "quantitative",
                    "title": "Number of migrants from each country"
                },
                "x": {
                    "field": "year",
                    "type": "ordinal",
                    "title":"Year"
                },
                "color": {
                    "field": "OdName","type": "nominal", "title":"Countries"
                },
                "tooltip": [
                    {"field": "OdName", "type": "nominal","title":"Country"},
                    {"field":"AreaName", "type": "nominal","title":"Continent"},
                    {"field": "number", "type": "quantitative", "title":"Migrants"}
                    ]
        }
        }
        
    ],
    "resolve": {"scale": {"y": "independent"}}
    
};
// optional argument passed to Vega-Embed to specify Vega-Lite spec. More info at https://github.com/vega/vega-embed
var opt = {
"mode": "vega-lite"
};
// Embed the visualization in the container with id `vis`
vegaEmbed("#vis3", v3Spec, opt).then(function(result) {
// Callback receiving the View instance and parsed Vega spec
// result.view is the View, which resides under the '#vis' element
}).catch(console.warn);
</script>

<!--BUBBLE-->
<script type="text/javascript"> 
    var v2Spec = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data":{ 
        "url": "https://raw.githubusercontent.com/asax0007/FIT3179_HW9/main/Australia%20data.csv"
    },
    "width": 500,
    "height": 450,
    "title": "Number of migrations to Australia",
    "params": [
        {
        "name": "Continent_selection",
        "bind": {
        "input": "select",
        "options": [
        null,
        "Northern America",
        "Latin America and the Caribbean",
        "Europe",
        "Africa",
        "Asia",
        "Oceania"            
        ],
        "labels":[
            "Show All",
            "Northern America",
            "Latin America and the Caribbean",
            "Europe",
            "Africa",
            "Asia",
            "Oceania"
            ],
        "name": "Continent Selection: "
        }
    },
    {
        "name": "Population_selection",
        "value":20000000,
         "bind":{
            "input": "range",
            "min": 100000,
            "max": 300000000,
            "step": 100000,
            "name": "population greater than: "
        }
    }
    ],
    "transform": [
        {
            "lookup": "CODE",
            "from":{
                "data":{ 
                    "url": "https://raw.githubusercontent.com/asax0007/FIT3179_DV2/main/FIT3179_population_data_cleaned.csv"
                },
            "key":"code",
            "fields":["mig1980","mig2008"]
            }
        },
       {"filter":"datum.mig2008 > Population_selection"},
       {"filter": "Continent_selection == null || datum.AreaName == Continent_selection"}
    ],
    "mark": {
        "type": "point"
        },
    "encoding": {
        "x": {
            "field": "1980",
            "type": "quantitative",
            "title": "Number of migrants in 1980",
            "scale": {"type": "log", "domain": [1, 70000]}
        },
        "y": {
            "field": "2008",
            "type": "quantitative",
            "title":"Number of migrants in 2008",
            "scale": {"type": "log", "domain": [1, 100000]}
        },
        "color": {
            "field": "AreaName","type": "nominal", "title":"Countries"
        },
        "size":{
            "field":"mig2008", "type": "quantitative",
            "scale":{"type":"log", "domain":[100000,1324655000]}
        },
        "tooltip": [
            {"field": "OdName", "type": "nominal","title":"Country:"},
            {"field":"AreaName", "type": "nominal","title":"Continent"},
            {"field": "1980", "type": "quantitative", "title":"Migrants in 1980"},
            {"field": "2008", "type": "quantitative", "title":"Migrants in 2008"}
        ]
}
};
                      // optional argument passed to Vega-Embed to specify Vega-Lite spec. More info at https://github.com/vega/vega-embed
var opt = {
"mode": "vega-lite"
};

// Embed the visualization in the container with id `vis`
vegaEmbed("#vis2", v2Spec, opt)
    </script>










</body>